<pou name="AnalogMeasurement" pouType="functionBlock">
    <interface>
        <inOutVars>
            <variable name="MTPBase"><type><derived name="AnaMon" /></type></variable>
        </inOutVars>
        <inputVars>
            <variable name="id"><type><INT /></type></variable>
            <variable name="rawValue"><type><WORD /></type></variable>
            <variable name="valueUnit"><type><INT /></type></variable>
            <variable name="scaleMin"><type><REAL /></type></variable>
            <variable name="scaleMax"><type><REAL /></type></variable>
            <variable name="alarmHigh"><type><REAL /></type></variable>
            <variable name="warningHigh"><type><REAL /></type></variable>
            <variable name="toleranceHigh"><type><REAL /></type></variable>
            <variable name="toleranceLow"><type><REAL /></type></variable>
            <variable name="warningLow"><type><REAL /></type></variable>
            <variable name="alarmLow"><type><REAL /></type></variable>
            <variable name="alarmHighEn"><type><BOOL /></type></variable>
            <variable name="warningHighEn"><type><BOOL /></type></variable>
            <variable name="toleranceHighEn"><type><BOOL /></type></variable>
            <variable name="toleranceLowEn"><type><BOOL /></type></variable>
            <variable name="warningLowEn"><type><BOOL /></type></variable>
            <variable name="alarmLowEn"><type><BOOL /></type></variable>
            <variable name="deadband"><type><REAL /></type></variable>
            <variable name="externalFault"><type><BOOL /></type></variable>
        </inputVars>
        <outputVars>
            <variable name="vOut"><type><REAL /></type></variable>
            <variable name="error"><type><BOOL /></type></variable>
            <variable name="alarmHighStatus"><type><BOOL /></type></variable>
            <variable name="warningHighStatus"><type><BOOL /></type></variable>
            <variable name="toleranceHighStatus"><type><BOOL /></type></variable>
            <variable name="toleranceLowStatus"><type><BOOL /></type></variable>
            <variable name="warningLowStatus"><type><BOOL /></type></variable>
            <variable name="alarmLowStatus"><type><BOOL /></type></variable>
        </outputVars>
        <localVars><!-- Temporary variables for MTP base interface access -->
            <variable name="WQC"><type><BYTE /></type></variable>
            <variable name="OSLevel"><type><BYTE /></type></variable>
            <variable name="V"><type><REAL /></type></variable>
            <variable name="VSclMin"><type><REAL /></type></variable>
            <variable name="VSclMax"><type><REAL /></type></variable>
            <variable name="VUnit"><type><INT /></type></variable>
            <variable name="VAHEn"><type><BOOL /></type></variable>
            <variable name="VWHEn"><type><BOOL /></type></variable>
            <variable name="VTHEn"><type><BOOL /></type></variable>
            <variable name="VTLEn"><type><BOOL /></type></variable>
            <variable name="VWLEn"><type><BOOL /></type></variable>
            <variable name="VALEn"><type><BOOL /></type></variable>
            <variable name="VAHLim"><type><REAL /></type></variable>
            <variable name="VWHLim"><type><REAL /></type></variable>
            <variable name="VTHLim"><type><REAL /></type></variable>
            <variable name="VTLLim"><type><REAL /></type></variable>
            <variable name="VWLLim"><type><REAL /></type></variable>
            <variable name="VALLim"><type><REAL /></type></variable>
        </localVars>
    </interface>
    <body>
        <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">
                <![CDATA[
// Copy MTP base variables to local temporaries (READ access)
V := MTPBase.V;
VSclMin := MTPBase.VSclMin;
VSclMax := MTPBase.VSclMax;
VAHLim := MTPBase.VAHLim;
VWHLim := MTPBase.VWHLim;
VTHLim := MTPBase.VTHLim;
VTLLim := MTPBase.VTLLim;
VWLLim := MTPBase.VWLLim;
VALLim := MTPBase.VALLim;


WQC := 16#FF;
OSLevel := 16#00;
V := VSclMin + (WORD_TO_REAL(rawValue) / 27648.0) * (VSclMax - VSclMin);
vOut := V;
VSclMin := scaleMin;
VSclMax := scaleMax;
VUnit := valueUnit;
VAHEn := alarmHighEn;
VWHEn := warningHighEn;
VTHEn := toleranceHighEn;
VTLEn := toleranceLowEn;
VWLEn := warningLowEn;
VALEn := alarmLowEn;

// Copy local temporaries back to MTP base variables (WRITE access)
MTPBase.WQC := WQC;
MTPBase.OSLevel := OSLevel;
MTPBase.V := V;
MTPBase.VSclMin := VSclMin;
MTPBase.VSclMax := VSclMax;
MTPBase.VUnit := VUnit;
MTPBase.VAHEn := VAHEn;
MTPBase.VWHEn := VWHEn;
MTPBase.VTHEn := VTHEn;
MTPBase.VTLEn := VTLEn;
MTPBase.VWLEn := VWLEn;
MTPBase.VALEn := VALEn;
                ]]>
            </xhtml>
        </ST>
    </body>
</pou>