<pou name="PIDController" pouType="functionBlock">
    <interface>
        <inOutVars>
            <variable name="MTPBase"><type><derived name="FB_MTP_PIDCtrl" /></type></variable>
        </inOutVars>
        <inputVars>
            <variable name="id"><type><INT /></type></variable>
            <variable name="setpoint"><type><REAL /></type></variable>
            <variable name="rawValue"><type><WORD /></type></variable>
            <variable name="valueUnit"><type><INT /></type></variable>
            <variable name="manipulatedValueUnit"><type><INT /></type></variable>
            <variable name="scaleMin"><type><REAL /></type></variable>
            <variable name="scaleMax"><type><REAL /></type></variable>
            <variable name="scaleMinMV"><type><REAL /></type></variable>
            <variable name="scaleMaxMV"><type><REAL /></type></variable>
            <variable name="proportional"><type><REAL /></type></variable>
            <variable name="integration"><type><REAL /></type></variable>
            <variable name="derivation"><type><REAL /></type></variable>
            <variable name="alarmHigh"><type><REAL /></type></variable>
            <variable name="warningHigh"><type><REAL /></type></variable>
            <variable name="toleranceHigh"><type><REAL /></type></variable>
            <variable name="toleranceLow"><type><REAL /></type></variable>
            <variable name="warningLow"><type><REAL /></type></variable>
            <variable name="alarmLow"><type><REAL /></type></variable>
            <variable name="alarmHighEn"><type><BOOL /></type></variable>
            <variable name="warningHighEn"><type><BOOL /></type></variable>
            <variable name="toleranceHighEn"><type><BOOL /></type></variable>
            <variable name="toleranceLowEn"><type><BOOL /></type></variable>
            <variable name="warningLowEn"><type><BOOL /></type></variable>
            <variable name="alarmLowEn"><type><BOOL /></type></variable>
            <variable name="deadband"><type><REAL /></type></variable>
            <variable name="externalFault"><type><BOOL /></type></variable>
        </inputVars>
        <outputVars>
            <variable name="setpointOut"><type><REAL /></type></variable>
            <variable name="valueOut"><type><REAL /></type></variable>
            <variable name="manipulatedValue"><type><REAL /></type></variable>
            <variable name="remote"><type><BOOL /></type></variable>
            <variable name="operator"><type><BOOL /></type></variable>
            <variable name="automatic"><type><BOOL /></type></variable>
            <variable name="offline"><type><BOOL /></type></variable>
            <variable name="error"><type><BOOL /></type></variable>
            <variable name="alarmHighStatus"><type><BOOL /></type></variable>
            <variable name="warningHighStatus"><type><BOOL /></type></variable>
            <variable name="toleranceHighStatus"><type><BOOL /></type></variable>
            <variable name="toleranceLowStatus"><type><BOOL /></type></variable>
            <variable name="warningLowStatus"><type><BOOL /></type></variable>
            <variable name="alarmLowStatus"><type><BOOL /></type></variable>
            <variable name="remoteSource"><type><BOOL /></type></variable>
            <variable name="internalSourceAct"><type><BOOL /></type></variable>
            <variable name="manualSourceAct"><type><BOOL /></type></variable>
        </outputVars>
        <localVars><!-- Temporary variables for MTP base interface access -->
            <variable name="StateChannel"><type><BOOL /></type></variable>
            <variable name="StateOpAct"><type><BOOL /></type></variable>
            <variable name="StateAutAct"><type><BOOL /></type></variable>
            <variable name="StateOffAct"><type><BOOL /></type></variable>
            <variable name="SrcChannel"><type><BOOL /></type></variable>
            <variable name="SrcIntAct"><type><BOOL /></type></variable>
            <variable name="SrcManAct"><type><BOOL /></type></variable>
            <variable name="WQC"><type><BYTE /></type></variable>
            <variable name="OSLevel"><type><BYTE /></type></variable>
            <variable name="PV"><type><REAL /></type></variable>
            <variable name="PVSclMin"><type><REAL /></type></variable>
            <variable name="PVSclMax"><type><REAL /></type></variable>
            <variable name="PVUnit"><type><INT /></type></variable>
            <variable name="SPInt"><type><REAL /></type></variable>
            <variable name="SPSclMin"><type><REAL /></type></variable>
            <variable name="SPSclMax"><type><REAL /></type></variable>
            <variable name="SPUnit"><type><INT /></type></variable>
            <variable name="SPIntMin"><type><REAL /></type></variable>
            <variable name="SPIntMax"><type><REAL /></type></variable>
            <variable name="SPManMin"><type><REAL /></type></variable>
            <variable name="SPManMax"><type><REAL /></type></variable>
            <variable name="SP"><type><REAL /></type></variable>
            <variable name="MV"><type><REAL /></type></variable>
            <variable name="MVMin"><type><REAL /></type></variable>
            <variable name="MVMax"><type><REAL /></type></variable>
            <variable name="MVUnit"><type><INT /></type></variable>
            <variable name="MVSclMin"><type><REAL /></type></variable>
            <variable name="MVSclMax"><type><REAL /></type></variable>
            <variable name="P"><type><REAL /></type></variable>
            <variable name="Ti"><type><REAL /></type></variable>
            <variable name="Td"><type><REAL /></type></variable>
        </localVars>
    </interface>
    <body>
        <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">
                <![CDATA[

// copy from and to the MTPBase
// there is no need to execute the MTPBase block here because it gets executed as part of the auto-generated MTP code
    MTPBase.WQC := WQC;
    MTPBase.OSLevel := OSLevel;
    MTPBase.PV := PV;
    MTPBase.PVSclMin := PVSclMin;
    MTPBase.PVSclMax := PVSclMax;
    MTPBase.PVUnit := PVUnit;
    MTPBase.SPInt := SPInt;
    MTPBase.SPSclMin := SPSclMin;
    MTPBase.SPSclMax := SPSclMax;
    MTPBase.SPUnit := SPUnit;
    MTPBase.SPIntMin := SPIntMin;
    MTPBase.SPIntMax := SPIntMax;
    MTPBase.SPManMin := SPManMin;
    MTPBase.SPManMax := SPManMax;
    MTPBase.MVMin := MVMin;
    MTPBase.MVMax := MVMax;
    MTPBase.MVUnit := MVUnit;
    MTPBase.MVSclMin := MVSclMin;
    MTPBase.MVSclMax := MVSclMax;
    StateChannel := MTPBase.StateChannel;
    StateOpAct := MTPBase.StateOpAct;
    StateAutAct := MTPBase.StateAutAct;
    StateOffAct := MTPBase.StateOffAct;
    SrcChannel := MTPBase.SrcChannel;
    SrcIntAct := MTPBase.SrcIntAct;
    SrcManAct := MTPBase.SrcManAct;
    PV := MTPBase.PV;
    SP := MTPBase.SP;
    MV := MTPBase.MV;
    P := MTPBase.P;
    Ti := MTPBase.Ti;
    Td := MTPBase.Td;



// Functionality

WQC := 16#FF;
OSLevel := 16#00;
remote := StateChannel;
operator := StateOpAct;
automatic := StateAutAct;
offline := StateOffAct;
remoteSource := SrcChannel;
internalSourceAct := SrcIntAct;
manualSourceAct := SrcManAct;
PV := scaleMin + (WORD_TO_REAL(rawValue) / 27648.0) * (scaleMax - scaleMin);
valueOut := PV;
PVSclMin := scaleMin;
PVSclMax := scaleMax;
PVUnit := valueUnit;
SPInt := setpoint;
SPSclMin := scaleMin;
SPSclMax := scaleMax;
SPUnit := valueUnit;
SPIntMin := scaleMin;
SPIntMax := scaleMax;
SPManMin := scaleMin;
SPManMax := scaleMax;
setpointOut := SP;
manipulatedValue := MV;
MVMin := scaleMinMV;
MVMax := scaleMaxMV;
MVUnit := manipulatedValueUnit;
MVSclMin := scaleMinMV;
MVSclMax := scaleMaxMV;
proportional := P;
integration := Ti;
derivation := Td;

                ]]>
            </xhtml>
        </ST>
    </body>
    <addData>
        <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="FB_INIT" ObjectId="8568aabb-efd1-4e11-b093-9ebdb5b0ac2b">
                <interface>
                    <returnType><BOOL /></returnType>
                    <inputVars>
                        <variable name="bInitRetains">
                            <type><BOOL /></type>
                            <documentation><xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE: the retain variables are initialized (reset warm / reset cold)</xhtml></documentation>
                        </variable>
                        <variable name="bInCopyCode">
                            <type><BOOL /></type>
                            <documentation><xhtml xmlns="http://www.w3.org/1999/xhtml"> TRUE: the instance will be copied to the copy code afterward (online change)   </xhtml></documentation>
                        </variable>
                    </inputVars>
                    <documentation>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">
FB_Init is always available implicitly and it is used primarily for initialization.
                        </xhtml>
                    </documentation>
                </interface>
                <body>
                    <ST>
                        <xhtml xmlns="http://www.w3.org/1999/xhtml">
// assign default values on initialization
                        </xhtml>
                    </ST>
                </body>
            </Method>
        </data>
    </addData>
</pou>